Код в данном подкаталоге обрабатывает код в интересных git-репозиториях, находя код, который давно не менялся и подсчитывая разные статистики. Список интересных репозиториев формируется набором скриптов github_dl

# parse_repo.py #

Принимает в качестве параметра имя репозитория, в формате владелец/имя , скачивает код с гитхаба и находит подмножество кода на Python, который давно не менялся. Время неизменности фрагмента считается в коммитах, причём считаются только те коммиты, которые затронули хотя бы один файл в каталоге, где лежит данный файл. При подсчете не учитываются файлы, содержащие подстроку "test" и файлы, которые имеют расширение, отличное от ".py".

При повторном запуске, программа работает с репозиторием, который уже был скачан. Чтобы программа скачала его ещё раз, нужно удалить репозиторий из каталога repo. Так же, для ускорения кешируются и результаты разбора кода модулем ast, чтобы инвалидировать кэш, нужно удалить соответствующий подкаталог в каталоге cache.

Результат работы программы записывается в каталог stat в формате pickle. В каталоги stat/stable_snippets_files и stat/source_files записываются, соответственно тексты функций и полные полные тексты файлов, содержащих данную функцию. Имена файлов совпадают с sha1 суммой их содержимого и имеют расширение ".py".

Результатом работы является pandas-dataframe, содержащий следующие колонки:

- before_merge - фрагмент кода
- repo_name - имя репозитория
- filename - имя файла в репозитории
- function_name - имя функции
- syntax_correct - указание на то, что синтаксис кода является валидным
- path_to_source_file - путь к файлу в подкаталоге source_files, содержащему полный текст файла, где содержится функция
- commit - идентификатор коммита в репозитории
- path_to_snippet_before_merge - путь к фрагменту кода в подкаталоге  stable_snippets_files, содержащему фрагмент кода
- times - количество коммитов, которые код не менялся

Если фукнция является методом класса, то её имя содержит имя класса, например, "point.length". Если функция отдекорирована другой функцией, то её имя содержит имя декоратора, например "@property func"

Для работы программы необходим python версии не ниже 3.9 и внешний модуль GitPython



